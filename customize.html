<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customize Your Sign - 4D Signs</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="customize.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
</head>
<body>
    <header class="main-header">
        <div class="header-content">
            <a href="Homepage.html" class="logo">4D Signs</a>
            <nav class="nav-bar">
                <a href="4Dsigns.html" class="nav-link"><i class="fas fa-home"></i> Home</a>
                <a href="customize.html" class="nav-link active"><i class="fas fa-palette"></i> Customize</a>
                <a href="review.html" class="nav-link"><i class="fas fa-star"></i> Reviews</a>
                <a href="cart.html" class="nav-link" title="Cart"><i class="fas fa-shopping-cart"></i></a>
                <a href="contact.html" class="nav-link" title="Contact"><i class="fas fa-envelope"></i></a>
            </nav>
        </div>
    </header>

    <main id="customize">
        <div class="page-header">
            <h1><i class="fas fa-paint-brush"></i> Customize Your Product</h1>
            <p class="subtitle">Create your unique design with our easy-to-use customization tool</p>
            <p class="subtitle" style="font-size: 0.75rem; margin-top: 0.5rem; opacity: 0.7;">
                <i class="fas fa-keyboard"></i> Shortcuts: Ctrl+Z (Undo), Ctrl+Y (Redo), Ctrl+D (Duplicate), Del (Delete), Arrows (Move)
            </p>
        </div>

        <div class="custom-layout">
            <form class="customize" enctype="multipart/form-data" autocomplete="off" style="display: contents;">
            <!-- Left Sidebar - Tools Panel -->
            <aside class="tools-sidebar">
                <div class="sidebar-header">
                    <h3><i class="fas fa-magic"></i> Design Tools</h3>
                </div>

                <div class="sidebar-content">
                    <!-- Elements Section -->
                    <div class="tool-section">
                        <button class="section-btn" onclick="toggleSection(this)">
                            <i class="fas fa-shapes"></i>
                            <span>Elements</span>
                            <i class="fas fa-chevron-down arrow"></i>
                        </button>
                        <div class="section-content active">
                            <button type="button" id="add-text-btn" class="element-btn">
                                <i class="fas fa-font"></i>
                                <span>Add Text</span>
                            </button>
                            <button type="button" id="add-shirt-icon-btn" class="element-btn">
                                <i class="fas fa-shirt"></i>
                                <span>Add T-Shirt Icon</span>
                            </button>
                            <div class="text-input-wrapper">
                                <input type="text" id="text-input" placeholder="Type your text..." class="custom-input">
                            </div>
                        </div>
                    </div>

                    <!-- Text Styles Section -->
                    <div class="tool-section">
                        <button class="section-btn" onclick="toggleSection(this)">
                            <i class="fas fa-text-height"></i>
                            <span>Text Styles</span>
                            <i class="fas fa-chevron-down arrow"></i>
                        </button>
                        <div class="section-content">
                            <div class="style-row">
                                <label>Font</label>
                                <select id="text-font" class="custom-select">
                                    <option value="Poppins">Poppins</option>
                                    <option value="Arial">Arial</option>
                                    <option value="Georgia">Georgia</option>
                                    <option value="Courier New">Courier New</option>
                                    <option value="Comic Sans MS">Comic Sans</option>
                                    <option value="Impact">Impact</option>
                                </select>
                            </div>
                            <div class="style-row">
                                <label>Size</label>
                                <div class="range-wrapper">
                                    <input type="range" id="text-size" min="12" max="72" value="24" class="custom-slider">
                                    <span id="text-size-value" class="range-label">24</span>
                                </div>
                            </div>
                            <div class="style-row">
                                <label>Weight</label>
                                <select id="text-weight" class="custom-select">
                                    <option value="300">Light</option>
                                    <option value="400">Normal</option>
                                    <option value="600">Semi-Bold</option>
                                    <option value="700" selected>Bold</option>
                                    <option value="900">Black</option>
                                </select>
                            </div>
                            <div class="style-row">
                                <label>Color</label>
                                <div class="color-input-wrapper">
                                    <input type="color" id="text-color" value="#FFFFFF" class="custom-color">
                                    <span class="color-hex">#FFFFFF</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Position Section -->
                    <div class="tool-section">
                        <button class="section-btn" onclick="toggleSection(this)">
                            <i class="fas fa-up-down-left-right"></i>
                            <span>Position</span>
                            <i class="fas fa-chevron-down arrow"></i>
                        </button>
                        <div class="section-content">
                            <div class="style-row">
                                <label>Rotation</label>
                                <div class="range-wrapper">
                                    <input type="range" id="rotation-slider" min="0" max="360" value="0" class="custom-slider">
                                    <span id="rotation-value" class="range-label">0°</span>
                                </div>
                            </div>
                            <div class="style-row">
                                <label>Opacity</label>
                                <div class="range-wrapper">
                                    <input type="range" id="opacity-slider" min="0" max="100" value="100" class="custom-slider">
                                    <span id="opacity-value" class="range-label">100%</span>
                                </div>
                            </div>
                            <div class="button-group">
                                <button type="button" id="flip-horizontal" class="mini-btn">
                                    <i class="fas fa-arrows-left-right"></i>
                                    <span>Flip H</span>
                                </button>
                                <button type="button" id="flip-vertical" class="mini-btn">
                                    <i class="fas fa-arrows-up-down"></i>
                                    <span>Flip V</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Effects Section -->
                    <div class="tool-section">
                        <button class="section-btn" onclick="toggleSection(this)">
                            <i class="fas fa-wand-magic-sparkles"></i>
                            <span>Effects</span>
                            <i class="fas fa-chevron-down arrow"></i>
                        </button>
                        <div class="section-content">
                            <div class="style-row">
                                <label>Brightness</label>
                                <div class="range-wrapper">
                                    <input type="range" id="brightness-slider" min="0" max="200" value="100" class="custom-slider">
                                    <span id="brightness-value" class="range-label">100</span>
                                </div>
                            </div>
                            <div class="style-row">
                                <label>Contrast</label>
                                <div class="range-wrapper">
                                    <input type="range" id="contrast-slider" min="0" max="200" value="100" class="custom-slider">
                                    <span id="contrast-value" class="range-label">100</span>
                                </div>
                            </div>
                            <div class="style-row">
                                <label>Saturation</label>
                                <div class="range-wrapper">
                                    <input type="range" id="saturation-slider" min="0" max="200" value="100" class="custom-slider">
                                    <span id="saturation-value" class="range-label">100</span>
                                </div>
                            </div>
                            <div class="style-row">
                                <label>Blur</label>
                                <div class="range-wrapper">
                                    <input type="range" id="blur-slider" min="0" max="10" value="0" step="0.5" class="custom-slider">
                                    <span id="blur-value" class="range-label">0</span>
                                </div>
                            </div>
                            <button type="button" id="reset-filters" class="reset-btn">
                                <i class="fas fa-rotate-left"></i> Reset All Filters
                            </button>
                        </div>
                    </div>

                    <!-- Layers Section -->
                    <div class="tool-section">
                        <button class="section-btn" onclick="toggleSection(this)">
                            <i class="fas fa-layer-group"></i>
                            <span>Layers</span>
                            <i class="fas fa-chevron-down arrow"></i>
                        </button>
                        <div class="section-content">
                            <div class="button-group vertical">
                                <button type="button" id="bring-forward" class="layer-action-btn">
                                    <i class="fas fa-arrow-up"></i>
                                    <span>Bring Forward</span>
                                </button>
                                <button type="button" id="send-backward" class="layer-action-btn">
                                    <i class="fas fa-arrow-down"></i>
                                    <span>Send Backward</span>
                                </button>
                                <button type="button" id="duplicate-btn" class="layer-action-btn">
                                    <i class="fas fa-copy"></i>
                                    <span>Duplicate (Ctrl+D)</span>
                                </button>
                                <button type="button" id="delete-selected" class="layer-action-btn delete">
                                    <i class="fas fa-trash-alt"></i>
                                    <span>Delete Selected</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- History Section -->
                    <div class="tool-section">
                        <button class="section-btn" onclick="toggleSection(this)">
                            <i class="fas fa-history"></i>
                            <span>History</span>
                            <i class="fas fa-chevron-down arrow"></i>
                        </button>
                        <div class="section-content">
                            <div class="button-group vertical">
                                <button type="button" id="undo-btn" class="layer-action-btn">
                                    <i class="fas fa-undo"></i>
                                    <span>Undo (Ctrl+Z)</span>
                                </button>
                                <button type="button" id="redo-btn" class="layer-action-btn">
                                    <i class="fas fa-redo"></i>
                                    <span>Redo (Ctrl+Y)</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Main Custom Area -->
            <div class="custom-area">
                <div class="custom-container">
                    <!-- Selection Info Banner -->
                    <div id="selection-info" style="display: none; background: rgba(255, 215, 0, 0.2); border: 1px solid #FFD700; padding: 0.5rem 1rem; margin-bottom: 1rem; border-radius: 8px; text-align: center; color: #FFD700; font-size: 0.9rem;">
                        <i class="fas fa-check-circle"></i> No element selected
                    </div>

                    <div class="product-selector-bar">
                        <label for="product-type"><i class="fas fa-box-open"></i> Product Type</label>
                        <select class="custom-select-dropdown" id="product-type">
                         <!--   <option value="sign">Custom Sign</option> -->
                            <option value="shirt">T-Shirt</option>
                            <option value="mug">Mug</option>
                            <option value="ecobag">Eco Bag</option>
                            <option value="key-chain">Key Chain</option>
                            <option value="ref-magnet">Ref Magnet</option>
                            <option value="sticker">Sticker</option>
                        </select>
                    </div>
                    <div class="design-canvas">
                        <div class="shirt-drop-area" id="shirtDropArea"> 
                            <div class="design-area">
                                <img id="sign-image"
                                     src="LogoProducts/sign-outline.jpg"
                                     alt="Sign Preview" 
                                     class="sign-preview product-template-image" 
                                     style="display:none; width:100%; height:auto; max-width:720px; margin:0 auto; pointer-events:none; user-select:none;"
                                     draggable="false"/>
                                <img id="shirt-image"
                                     src="LogoProducts/shirt-outline.jpg"
                                     alt="T-Shirt Preview" 
                                     class="shirt-preview product-template-image" 
                                     style="display:none; width:100%; height:auto; max-width:720px; margin:0 auto; pointer-events:none; user-select:none;"
                                     draggable="false"/>
                                <img id="mug-image"
                                     src="LogoProducts/mug-outline.jpg"
                                     alt="Mug Preview" 
                                     class="mug-preview product-template-image" 
                                     style="display:none; width:100%; height:auto; max-width:720px; margin:0 auto; pointer-events:none; user-select:none;"
                                     draggable="false"/>
                                <img id="ecobag-image"
                                     src="LogoProducts/ecobag-outline.jpg"
                                     alt="Eco Bag Preview" 
                                     class="ecobag-preview product-template-image" 
                                     style="display:none; width:100%; height:auto; max-width:720px; margin:0 auto; pointer-events:none; user-select:none;"
                                     draggable="false"/>
                                <p class="hint-text"><i class="fas fa-info-circle"></i> Drag and drop your design here</p>
                            </div>
                        </div>
                    </div>
                    <div class="custom-footer">
                        <button type="button" id="choose-again" class="secondary-action-btn" style="display: none;">
                            <i class="fas fa-redo"></i> Choose Again
                        </button>
                        <button type="button" id="clear-all-btn" class="secondary-action-btn" style="background: rgba(220, 53, 69, 0.2); border-color: #dc3545;">
                            <i class="fas fa-trash"></i> Clear All
                        </button>
                        <button type="button" id="done-design-btn" class="primary-action-btn">
                            <i class="fas fa-check-circle"></i> Done Design
                        </button>
                    </div>
                </div>
            </div>

            <!-- Size Selection Modal -->
            <div id="size-modal" class="size-modal">
                <div class="size-modal-content">
                    <div class="size-modal-header">
                        <h2><i class="fas fa-ruler-combined"></i> Select Sizes & Quantities</h2>
                        <button type="button" class="close-modal" id="close-size-modal">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="size-modal-body">
                        <!-- Small Size -->
                        <div class="size-option">
                            <div class="size-header">
                                <h3>Small (S)</h3>
                                <label class="enable-checkbox">
                                    <input type="checkbox" id="enable-small" class="size-enable">
                                    <span>Enable</span>
                                </label>
                            </div>
                            <div class="size-controls" id="small-controls">
                                <div class="control-row">
                                    <label><i class="fas fa-hashtag"></i> Quantity:</label>
                                    <div class="quantity-control">
                                        <button type="button" class="qty-btn minus" data-size="small">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                        <input type="number" id="qty-small" class="qty-input" value="0" min="0" readonly>
                                        <button type="button" class="qty-btn plus" data-size="small">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="control-row">
                                    <label><i class="fas fa-palette"></i> Color:</label>
                                    <div class="color-picker-wrapper">
                                        <input type="color" id="color-small" class="size-color-picker" value="#ffffff">
                                        <span class="color-label" id="color-small-label">#FFFFFF</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Medium Size -->
                        <div class="size-option">
                            <div class="size-header">
                                <h3>Medium (M)</h3>
                                <label class="enable-checkbox">
                                    <input type="checkbox" id="enable-medium" class="size-enable">
                                    <span>Enable</span>
                                </label>
                            </div>
                            <div class="size-controls" id="medium-controls">
                                <div class="control-row">
                                    <label><i class="fas fa-hashtag"></i> Quantity:</label>
                                    <div class="quantity-control">
                                        <button type="button" class="qty-btn minus" data-size="medium">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                        <input type="number" id="qty-medium" class="qty-input" value="0" min="0" readonly>
                                        <button type="button" class="qty-btn plus" data-size="medium">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="control-row">
                                    <label><i class="fas fa-palette"></i> Color:</label>
                                    <div class="color-picker-wrapper">
                                        <input type="color" id="color-medium" class="size-color-picker" value="#ffffff">
                                        <span class="color-label" id="color-medium-label">#FFFFFF</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Large Size -->
                        <div class="size-option">
                            <div class="size-header">
                                <h3>Large (L)</h3>
                                <label class="enable-checkbox">
                                    <input type="checkbox" id="enable-large" class="size-enable">
                                    <span>Enable</span>
                                </label>
                            </div>
                            <div class="size-controls" id="large-controls">
                                <div class="control-row">
                                    <label><i class="fas fa-hashtag"></i> Quantity:</label>
                                    <div class="quantity-control">
                                        <button type="button" class="qty-btn minus" data-size="large">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                        <input type="number" id="qty-large" class="qty-input" value="0" min="0" readonly>
                                        <button type="button" class="qty-btn plus" data-size="large">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="control-row">
                                    <label><i class="fas fa-palette"></i> Color:</label>
                                    <div class="color-picker-wrapper">
                                        <input type="color" id="color-large" class="size-color-picker" value="#ffffff">
                                        <span class="color-label" id="color-large-label">#FFFFFF</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="size-modal-footer">
                        <button type="button" id="cancel-size-btn" class="cancel-btn">
                            <i class="fas fa-times-circle"></i> Cancel
                        </button>
                        <button type="button" id="confirm-size-btn" class="confirm-btn">
                            <i class="fas fa-check-circle"></i> Add to Cart
                        </button>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Upload -->
            <aside class="upload-panel">
                <div class="upload-header">
                    <h3><i class="fas fa-cloud-upload-alt"></i> Upload</h3>
                </div>
                <div class="upload-panel-content">
                    <div class="upload-area" id="drop-zone">
                        <div class="upload-container">
                            <i class="fas fa-cloud-upload-alt upload-icon" id="upload-icon"></i>
                            <img id="preview-image" class="preview-image" style="display: none;">
                            <p id="drop-text">Drop image here</p>
                            <p class="or-text">or</p>
                            <input type="file" id="file-input" accept="image/*" hidden>
                            <button type="button" class="browse-btn-custom" onclick="document.getElementById('file-input').click()">
                                <i class="fas fa-folder-open"></i> Browse Files
                            </button>
                        </div>
                    </div>

                    <div class="custom-name-section">
                        <label for="custom-text"><i class="fas fa-tag"></i> Product Name</label>
                        <input type="text" id="custom-text" placeholder="Enter product name" class="custom-input" autocomplete="off">
                    </div>
                </div>
            </aside>
            </form>
        </div>
    </main>

    <script>
        function toggleSection(button) {
            const section = button.closest('.tool-section');
            const content = section.querySelector('.section-content');
            const arrow = button.querySelector('.arrow');
            
            section.classList.toggle('collapsed');
            
            if (section.classList.contains('collapsed')) {
                content.style.maxHeight = '0';
                content.style.opacity = '0';
                arrow.style.transform = 'rotate(-90deg)';
            } else {
                content.style.maxHeight = content.scrollHeight + 'px';
                content.style.opacity = '1';
                arrow.style.transform = 'rotate(0deg)';
            }
        }

        // Update slider values and color hex display
        document.addEventListener('DOMContentLoaded', function() {
            // Text size slider
            const textSizeSlider = document.getElementById('text-size');
            const textSizeValue = document.getElementById('text-size-value');
            if (textSizeSlider && textSizeValue) {
                textSizeSlider.addEventListener('input', function() {
                    textSizeValue.textContent = this.value;
                });
            }

            // Rotation slider
            const rotationSlider = document.getElementById('rotation-slider');
            const rotationValue = document.getElementById('rotation-value');
            if (rotationSlider && rotationValue) {
                rotationSlider.addEventListener('input', function() {
                    rotationValue.textContent = this.value + '°';
                });
            }

            // Opacity slider
            const opacitySlider = document.getElementById('opacity-slider');
            const opacityValue = document.getElementById('opacity-value');
            if (opacitySlider && opacityValue) {
                opacitySlider.addEventListener('input', function() {
                    opacityValue.textContent = this.value + '%';
                });
            }

            // Brightness slider
            const brightnessSlider = document.getElementById('brightness-slider');
            const brightnessValue = document.getElementById('brightness-value');
            if (brightnessSlider && brightnessValue) {
                brightnessSlider.addEventListener('input', function() {
                    brightnessValue.textContent = this.value;
                });
            }

            // Contrast slider
            const contrastSlider = document.getElementById('contrast-slider');
            const contrastValue = document.getElementById('contrast-value');
            if (contrastSlider && contrastValue) {
                contrastSlider.addEventListener('input', function() {
                    contrastValue.textContent = this.value;
                });
            }

            // Saturation slider
            const saturationSlider = document.getElementById('saturation-slider');
            const saturationValue = document.getElementById('saturation-value');
            if (saturationSlider && saturationValue) {
                saturationSlider.addEventListener('input', function() {
                    saturationValue.textContent = this.value;
                });
            }

            // Blur slider
            const blurSlider = document.getElementById('blur-slider');
            const blurValue = document.getElementById('blur-value');
            if (blurSlider && blurValue) {
                blurSlider.addEventListener('input', function() {
                    blurValue.textContent = this.value;
                });
            }

            // Color picker hex display
            const textColor = document.getElementById('text-color');
            const colorHex = document.querySelector('.color-hex');
            if (textColor && colorHex) {
                textColor.addEventListener('input', function() {
                    colorHex.textContent = this.value.toUpperCase();
                });
            }

            // Show sign preview image when product type is "sign"
            const productSelect = document.getElementById('product-type');
            const signImage = document.getElementById('sign-image');
            const shirtImage = document.getElementById('shirt-image');
            const mugImage = document.getElementById('mug-image');
            const ecobagImage = document.getElementById('ecobag-image');
            const hintText = document.querySelector('.design-area .hint-text');
            function updateProductPreview() {
                if (!productSelect) return;
                if (productSelect.value === 'sign') {
                    if (signImage) signImage.style.display = 'block';
                    if (shirtImage) shirtImage.style.display = 'none';
                    if (mugImage) mugImage.style.display = 'none';
                    if (ecobagImage) ecobagImage.style.display = 'none';
                    if (hintText) hintText.style.display = 'none';
                } else if (productSelect.value === 'shirt') {
                    if (signImage) signImage.style.display = 'none';
                    if (shirtImage) shirtImage.style.display = 'block';
                    if (mugImage) mugImage.style.display = 'none';
                    if (ecobagImage) ecobagImage.style.display = 'none';
                    if (hintText) hintText.style.display = 'none';
                } else if (productSelect.value === 'mug') {
                    if (signImage) signImage.style.display = 'none';
                    if (shirtImage) shirtImage.style.display = 'none';
                    if (mugImage) mugImage.style.display = 'block';
                    if (ecobagImage) ecobagImage.style.display = 'none';
                    if (hintText) hintText.style.display = 'none';
                } else if (productSelect.value === 'ecobag') {
                    if (signImage) signImage.style.display = 'none';
                    if (shirtImage) shirtImage.style.display = 'none';
                    if (mugImage) mugImage.style.display = 'none';
                    if (ecobagImage) ecobagImage.style.display = 'block';
                    if (hintText) hintText.style.display = 'none';
                } else {
                    if (signImage) signImage.style.display = 'none';
                    if (shirtImage) shirtImage.style.display = 'none';
                    if (mugImage) mugImage.style.display = 'none';
                    if (ecobagImage) ecobagImage.style.display = 'none';
                    if (hintText) hintText.style.display = 'block';
                }
            }
            if (productSelect) {
                productSelect.addEventListener('change', updateProductPreview);
                // initialize on load
                updateProductPreview();
            }

            // Initialize section states - keep Elements section open by default
            const sections = document.querySelectorAll('.tool-section');
            sections.forEach((section, index) => {
                const content = section.querySelector('.section-content');
                if (index !== 0) { // Keep first section (Elements) open
                    section.classList.add('collapsed');
                    content.style.maxHeight = '0';
                    content.style.opacity = '0';
                    const arrow = section.querySelector('.arrow');
                    if (arrow) arrow.style.transform = 'rotate(-90deg)';
                }
            });
            
            // Prevent product template images from being interactive
            const templateImages = document.querySelectorAll('.product-template-image, #sign-image, #shirt-image, #mug-image, #ecobag-image');
            templateImages.forEach(img => {
                img.style.pointerEvents = 'none';
                img.style.userSelect = 'none';
                img.draggable = false;
                
                // Prevent any click or drag events
                img.addEventListener('mousedown', (e) => e.stopPropagation(), true);
                img.addEventListener('click', (e) => e.stopPropagation(), true);
                img.addEventListener('dragstart', (e) => e.preventDefault(), true);
            });
        });
    </script>
    <script src="customize-script.js"></script>
</body>
</html>

